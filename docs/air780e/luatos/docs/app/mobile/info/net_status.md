# 网络状态

## 状态描述

```
-- 0:网络未注册
-- 1:网络已注册
-- 2:正在搜网中
-- 3:网络注册被拒绝
-- 4:网络状态未知
-- 5:漫游,且已注册
-- 6:仅SMS可用
-- 7:仅SMS可用,且漫游状态
-- 8:仅紧急呼叫. 注意, 国内不支持此状态,模块也不支持紧急呼叫
```

## 获取网络状态

**mobile.status()**

```lua
sys.taskInit(function()
	-- 在刚开机获取网络状态
    local status = mobile.status()    
    log.info("status", status) 
    -- 实例输出：status 0（网络未注册）
        
    -- 延时2秒后获取网络状态
    sys.wait(2000)
    local status = mobile.status()    
    log.info("status", status) 
    -- 实例输出：status 2（正在搜网中）
        
    -- 延时4秒后获取网络状态
    sys.wait(4000)
    local status = mobile.status()    
    log.info("status", status) 
    -- 实例输出：status 1（网络已注册）   
   
end)
```

## 无法注册网络、注册网络慢、无法附着网络、附着网络慢

1、参考SIM问题章节检查下是否不识卡。

2、检查下sim卡是否欠费，流量是否用完。【其他情况可以咨询卡商】

3、确认天线是否匹配。

4、检查天线是否连接、天线连接座子的接口是否正确、天线是否损坏【换天线确认】。

5、换卡、换板子对比测试，确保使用正常的硬件和sim卡测试。

6、确保模块支持当地的网络制式

7、偏远地区的网络覆盖可能不全，或者产品的天线射频指标不合格，想办法用手机对比测试；用手机对比测试时，注意手机要设置为和模块同样的网络制式，同时借助Cellular-Z工具确认。

8、环境因素（车库、地下室、电梯等）。

9、确认下是否所有设备在同一地点表现是否一致，有可能是伪基站造成的。

10、卡是不是专网卡，是否机卡绑定，专网卡需要设置正确的APN，机卡分离停机需要联系卡商，重新绑定。

11、如果模块是海外模块，请通过模块对应的规格书，查看是否有支持国内的频段，支持的频段对应的国内运营商是哪一家，测试环境周围是否有当前频段的基站。
