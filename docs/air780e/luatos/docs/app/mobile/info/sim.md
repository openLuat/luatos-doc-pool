# 切换SIM卡

## mobile.simid(id)

获取当前SIM卡槽,或者切换卡槽

**参数**

| 传入值类型 | 解释                                                         |
| ---------- | ------------------------------------------------------------ |
| int        | SIM卡的编号, 例如0, 1, 如果支持双卡，比如EC618，可以填2来自适应，但是会占用掉4个IO(gpio4/5/6/23)。如果不填就直接读取当前卡槽 |
| boolean    | 是否优先用SIM0，只有SIM卡编号写2自适应才有用！！！。true优先用SIM0，false则由具体平台决定，支持双卡双待SIM0优先，不支持的是上一次检测到的优先，默认是false，必须在开机就配置，否则就无效了 |

**返回值**

| 返回值类型 | 解释                         |
| ---------- | ---------------------------- |
| int        | 当前sim卡槽编号,若失败返回-1 |

**例子**

```
mobile.simid(0) -- 固定使用SIM0
mobile.simid(1) -- 固件使用SIM1
mobile.simid(2) -- 自动识别SIM0, SIM1, 优先级看具体平台
mobile.simid(2, true) -- -- 自动识别SIM0, SIM1, 且SIM0优先
-- 提醒, 自动识别是会增加时间的
```

## mobile.simPin(id,operation,pin1,pin2)

检测当前SIM卡是否准备好，对SIM卡的PIN码做相关操作

**参数**

| 传入值类型 | 解释                                                         |
| ---------- | ------------------------------------------------------------ |
| int        | SIM卡的编号, 例如0, 1, 支持双卡双待的才需要选择              |
| int        | PIN码操作类型，只能是mobile.PIN_XXXX，不操作就留空           |
| string     | 更换pin时操作的pin码，或者验证操作的pin码，或者解锁pin码时的PUK，4~8字节 |
| string     | 更换pin码操作时的新的pin码，解锁pin码时的新PIN，4~8字节      |

**返回值**

| 返回值类型 | 解释                                                         |
| ---------- | ------------------------------------------------------------ |
| boolean    | 当无PIN操作时，返回SIM卡是否准备好，有PIN操作时，返回是否成功 |

**例子**

```
local cpin_is_ready = mobile.simPin() -- 当前sim卡是否准备好，一般返回false就是没卡
local succ = mobile.simPin(0, mobile.PIN_VERIFY, "1234")    -- 输入pin码验证
```

## mobile.setAuto(check_sim_period, get_cell_period, search_cell_time, auto_reset_stack, network_check_period)

设置一些辅助周期性或者自动功能，目前支持SIM卡暂时脱离后恢复，周期性获取小区信息，网络遇到严重故障时尝试自动恢复

**参数**

| 传入值类型 | 解释                                                         |
| ---------- | ------------------------------------------------------------ |
| int        | SIM卡自动恢复时间，单位毫秒，建议5000~10000，和飞行模式/SIM卡切换冲突，不能再同一时间使用，必须错开执行。写0或者不写则是关闭功能 |
| int        | 周期性获取小区信息的时间间隔，单位毫秒。获取小区信息会增加部分功耗。写0或者不写则是关闭功能 |
| int        | 每次搜索小区时最大搜索时间，单位秒。不要超过8秒              |
| boolean    | 网络遇到严重故障时尝试自动恢复，和飞行模式/SIM卡切换冲突，true开启，false关闭，开始状态是false，留空则不做改变 |
| int        | 设置定时检测网络是否正常并且在检测到长时间无网时通过重启协议栈来恢复，无网恢复时长，单位ms，建议60000以上，为网络搜索网络保留足够的时间，留空则不做更改 |

**返回值**

| 返回值类型 | 解释     |
| ---------- | -------- |
| nil        | 无返回值 |

**例子**

无
