## 超低功耗指令：AT+POWERMODE

**注：EC618平台系列模块（Air780E系列）软件版本=V1143（LPAT版本）支持**

**超低功耗方案参考：https://doc.openluat.com/wiki/50**

语法规则：

| 命令类型 | 语法                                                         | 返回和说明                        |
| -------- | ------------------------------------------------------------ | --------------------------------- |
| 设置命令 | AT+POWERMODE=<mode>[,<para>][,<para2>]                       | OK                                |
| 查询命令 | AT+POWERMODE?                                                | +POWERMODE:<mode>[,<para>] <br>OK |
| 注意事项 | 1. 响应优先模式和平衡模式，串口波特率设置为9600，可以保证休眠的时候发送的第一包AT 不丢失<br>2. PSM+模式，串口波特率设置为9600，可以保证必唤醒<br>3. 需要设置AT+CFGRI=1指令，才能拉低RI管脚<br>4. AT+CIPSEND=10\r1234567890 (发送数据用左侧，长度后面直接\r加数据的方式发送，因为等待>可能会导致超时模块进入休眠)<br>5.PSM+模式不支持自动升级，fota升级建议手动升级，此模式下读取的CSQ，CESQ不准确 |                                   |

 

 

 

 

 

参数定义：

| 参数                                                         | 定义                                                         | 取值    | 对取值的说明                                                 |
| ------------------------------------------------------------ | ------------------------------------------------------------ | ------- | ------------------------------------------------------------ |
| <mode>                                                       | 响应优先模式（关机会保存）                                   | "PRO"   | 功能介绍<br>1.远程唤醒速度快(2秒内)<br>2.信号好的情况下能达到474uA 的平均待机电流<br>3.支持UART和GPIO 中断唤醒唤醒方式<br>1.链接的服务器，下发数据到模块，模块会被唤醒，并且打印URC，同时拉低RI管脚120ms<br>2.通过DTR下拉 或者VBUS上拉可以唤醒模块<br>3.通过UART 发送数据给模块，可以唤醒模块 |
|                                                              | 平衡模式（关机会保存）                                       | "STD"   | 功能介绍<br>1.远程唤醒速度快(2分钟内)<br>2.信号好的情况下能达到474uA 的平均待机电流<br>3.支持UART和GPIO 中断唤醒唤醒方式<br>1.链接的服务器，下发数据到模块，模块会被唤醒，并且打印URC，同时拉低RI管脚120ms<br>2.通过DTR下拉 或者VBUS上拉可以唤醒模块<br>3.通过UART 发送数据给模块，可以唤醒模块 |
|                                                              | PSM+模式（关机会保存）                                       | "PSM+"  | 功能介绍<br>1.远程无法唤醒<br>2.待机功耗2.89uA<br>3.支持UART和GPIO中断以及定时器唤醒(会拉低RI唤醒或者打开单片机)唤醒方式<br>1.如果输入了time 则定期会唤醒单片机，执行响应的操作<br>2.通过DTR下拉 或者VBUS上拉可以唤醒模块<br>3.通过UART 发送数据给模块，可以唤醒模块 |
|                                                              | 退出超低功耗模式（关机会保存）                               | "CLOSE" |                                                              |
| <para>                                                       | PSM+模式下，定时拉低RI管脚                                   |         | 单位：s                                                      |
|                                                              | "PRO","STD"模式下,是否开启ipv6<br>**（EC618平台系列模块（Air780E系列）软件版本>=V1146（LPAT版本）支持）** | 0       | 关闭（默认关闭）                                             |
|                                                              |                                                              | 1       | 打开                                                         |
| <para2><br>**（EC618平台系列模块（Air780E系列）软件版本>=V1148（LPAT版本）支持）** | PSM+模式下,是否打开TAU<br>(TAU配置为1 待机功耗能到2.9uA，配置为0，基站分配TAU时间为54分钟) | 0       | 打开TAU（默认）                                              |
|                                                              |                                                              | 1       | 关闭TAU                                                      |

 

举例：

| 命令（→）/  返回（←） | 实例                                 | 解释和说明                                          |
| --------------------- | ------------------------------------ | --------------------------------------------------- |
| →                     | AT+IPR=9600;&W                       | 切换为9600，可以保证休眠的时候发送的第一包AT 不丢失 |
| ←                     | OK                                   |                                                     |
| →                     | AT+POWERMODE="PRO"                   | 设置为响应优先模式                                  |
| ←                     | OK                                   |                                                     |
| →                     | AT+CIPSTART="TCP",112.125.89.8,42951 | 先进入PRO 模式后，再链接服务器)                     |
| ←                     | CONNECT OK                           |                                                     |
| →                     | AT^HEARTCONFIG=1,0,300               | 设置心跳周期                                        |
| ←                     | OK                                   |                                                     |
| →                     | AT^HEARTBEATHEX=0,6,414243444546     | 设置心跳内容                                        |
| ←                     | OK                                   |                                                     |
