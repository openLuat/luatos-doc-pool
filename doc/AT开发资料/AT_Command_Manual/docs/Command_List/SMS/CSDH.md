## 控制TEXT模式下短信头信息显示：AT+CSDH

设置命令可控制是否在文本模式下的结果码中显示详细的头信息.

语法规则：

| 命令类型 | 语法               | 返回                  |
| -------- | ------------------ | --------------------- |
| 设置命令 | `AT+CSDH=[<show>]` | OK                    |
| 查询命令 | AT+CSDH?           | `+CSDH:<show>` <br>OK |
| 测试命令 | AT+CSDH=?          | `+CSDH:<show>`<br> OK |

 

参数定义：

| 参数     | 定义           | 取值 | 对取值的说明                                                 |
| -------- | -------------- | ---- | ------------------------------------------------------------ |
| `<show>` | 是否显示头信息 | 0    | 对于SMS-DELIVER 和 SMS-SUBMIT短信，不在+CMT, +CMGL, +CMGR结果码中显示+CSCA和+CSMP指令设置的参数(`<sca>、<tosca>、 <fo>、<vp>、<pid>、<dcs>`)，也不显示`<length>、<toda>`或`<tooa>`；对于+CMGR 指令结果码中的 SMS-COMMAND，不显 示`<pid>、<mn>、 <da>、<toda>、<length>、<cdata>` |
|          |                | 1    | 在结果码中显示这些取值                                       |

 

举例：

| 命令（→）/  返回（←） | 实例                                                         | 解释和说明                                                   |
| --------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| →                     | AT+CSDH?                                                     | 查询是否显示头信息                                           |
| ←                     | +CSDH: 0 OK                                                  | 查询结果为：不显示相关头信息                                 |
| →                     | AT+CMGR=8                                                    | 查询位置为8的短信，内容为"good!"                             |
| ←                     | +CMGR: "REC READ","+86131******56",,"12/08/08,10:43:04+32"Good! <br>OK | 查询结果不显示`<tooa>,<fo>,<pid>,<dcs>,<sca>,<tosca>,<length>` |
| →                     | AT+CNMI=2,2,0,0,0                                            | 设置短信自动内容直接上报给TE，不缓存（将+CNMI的第二个参数`<mt>`设置为2即可） |
| ←                     | OK                                                           |                                                              |
| ←（URC）              | +CMT: "+86131******56",,"12/08/08,11:09:23+32"Report         | 发送一个内容为Report的短信给模块，上报内容不显示`<fo>、<vp>、<pid>` 和`<dcs>、<sca>、<tosca>` |
| →                     | AT+CSDH=1                                                    | 设置`<show>`=1，即显示头信息                                 |
| ←                     | OK                                                           |                                                              |
| →                     | AT+CMGR=8                                                    | 仍旧查询位置8的短信                                          |
| ←                     | +CMGR: "REC UNREAD" ,"+86131******56",,"12/08/08,10:43:04+32",145,17,0,0,"+8613800210500",145,5Good!<br> OK | 查询结果显示`<tooa>,<fo>,<pid>,<dcs>,<sca>,<tosca>,<length>` |
| ←（URC）              | +CMT: "+86131******56",,"12/08/08,11:05:45+32",145,17,0,0,"+8613800210500",145,7 weather | 发送一个内容为weather的短信给模块，上报内容显示`<fo>、<vp>、<pid>` 和`<dcs>、<sca>、<tosca>` |
