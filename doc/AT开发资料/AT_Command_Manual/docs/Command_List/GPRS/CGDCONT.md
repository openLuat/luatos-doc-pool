## **8.1** PDP上下文定义：AT+CGDCONT

设置命令设置以cid为标志的PDP上下文参数。

查询命令查询所有的PDP上下文定义。

语法规则：

| 命令类型 | 语法                                                         | 返回                                                         |
| -------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 设置命令 | `AT+CGDCONT=<cid>[,<PDP_type>[,<APN>[,<PDP_addr>[,<d_comp>[,<h_comp>]]]]]` | OK                                                           |
| 查询命令 | AT+CGDCONT?                                                  | `[+CGDCONT:<cid>,<PDP_type>,<APN>,<PDP_addr>,<d_comp>,<h_comp>[,<pd1>[,…[,pdN]]][+CGDCONT:,,,,,[,[,…[,pdN]]][…]]]` <br>OK |
| 测试命令 | AT+CGDCONT=?                                                 | `+CGDCONT:(<cid>取值列表),<PDP_type>,,,(<d_comp>取值列表),(<h_comp>取值列表)`<br> OK |

 

参数定义：

| 参数            | 定义                                     | 取值   | 对取值的说明                                                 |
| --------------- | ---------------------------------------- | ------ | ------------------------------------------------------------ |
| `<cid>`         | PDP上下文标识，用于标识一个PDP上下文定义 | 1~15   | 整数型。该参数对TE-MT接口而言是本地参数，并且可用于其他PDP上下文相关指令 |
| `<PDP_type>`    | 分组数据协议类型; 字符型                 | "IP"   | 支持"IP"互联网协议IP(Internet Protocol)(IETF STD5)，默认值   |
|                 |                                          | "IPV6" | Internet Protocol, version 6 (IETF RFC 2460)                 |
|                 |                                          | "PPP"  | Point to Point Protocol (IETF STD 51)                        |
| `<APN>`         | 接入点名称（Access Point Name）          |        | 字符串型，用于选择GGSN或外部分组数据网络的逻辑名称。若该参数取值为空或省略，则需要请求签约值。 |
| `<PDP_address>` | 分组数据协议地址                         |        | 字符型，这是IP协议地址，格式为： "`<n>.<n>.<n>.<n>`"其中`<n>`=0~255；用于标识对于特定PDP上下文，MT分配的地址空间。若该参数为空或等于"0.0.0.0 "，MT将被要求分配一个动态地址。使用+CGPADDR命令可读出此分配地址。 |
| `<d_comp>`      | 用于控制PDP 数据压缩。仅适用于SNDCP。    | 0      | 关闭PDP数据压缩(默认值)                                      |
|                 |                                          | 1      | 打开PDP数据头压缩（由厂商定义压缩方式，暂不支持！）          |
|                 |                                          | 2      | V.42bis                                                      |
| `<h_comp>`      | 控制PDP 头压缩。数字型参数               | 0      | 关闭PDP头压缩(默认值)                                        |
|                 |                                          | 1      | RFC1144（仅适用于SNDCP）                                     |
|                 |                                          | 2      | RFC2507（暂不支持）                                          |
| `<pd1>… <pdN>`  | 与`<PDP_type>`相关的参数                 |        | 字符串型                                                     |

 

举例：

| 命令（→）/返回（←） | 实例                                                         | 解释和说明                                                   |
| ------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| →                   | AT+CGDCONT?                                                  | 开机注册后查询当前PDP上下文                                  |
| ←                   | +CGDCONT: 1,"IP","xz01.njm2mapn","10.173.90.29",0,0<br>OK    | 缺省已经有一个PDP上下文，这个PDP上下文，用于模块RNDIS网卡功能以及TCPIP/HTTP/MQTT/FTP等数据业务。 |
| →                   | AT+CGDCONT=?                                                 | 查询参数取值范围                                             |
| ←                   | +CGDCONT: <br>(1-15),"IP",,,,,(0),(0,2),(0),(0),(0,1),(0),(0,1),(0)<br>+CGDCONT: (1-15),"IPV6",,,,,(0),(0,2),(0),(0),(0,1),(0),(0),(0)<br>+CGDCONT: (1-15),"IPV4V6",,,,,(0),(0,2),(0),(0),(0,1),(0),(0,1),(0)<br>+CGDCONT: (1-15),"Non-IP",,,,,(0),(0,2),(0),(0),(0,1),(0),(0),(0),(0,1)<br>OK | 查询结果                                                     |
