## 从存储器发送短信：AT+CMSS

使用设置指令，可将消息存储器<mem2>中，位置取值参数为<index>的消息发送到网络侧(SMS-SUBMIT 或 SMS-COMMAND)。若给定 SMS-SUBMIT 消息的新接收地址参数<da>，应使用该参数，而不能使用已存储消息的参数。发送成功后，参考值<mr> 将返回给 TE。

语法规则：

| 命令类型 | 语法                            | 返回和说明        |
| -------- | ------------------------------- | ----------------- |
| 设置命令 | AT+CMSS=<index>[,<da>[,<toda>]] | +CMSS:<mr><br> OK |
| 测试命令 | AT+CMSS=?                       | OK                |

 

参数定义：

| 参数    | 定义                            | 取值  | 对取值的说明                                                 |
| ------- | ------------------------------- | ----- | ------------------------------------------------------------ |
| <index> | 待发送短信在存储器的地址        | -     | 整数型；关联存储器支持的地址编号范围内的取值                 |
| <da>    | 目的地址（Destination Address） | -     | GSM 03.40 TP-Destination-Address 中"地址－取值"字 段，字符型；将 BCD 数值(或缺省 GSM 字母格式的字符) 转换为当前选择的 TE 字符集中的字符(请参考 TS 07.07 中的+CSCS 指令)；地址类型由<toda>定义 |
| <toda>  | 目的地址类型（Type of <da>）    | -     | 整数型的 GSM 04.11 TP-Destination-Address 中的 8 位"类型－地址"字段(当<da>的首字符为+(IRA 43)时， 缺省值为 145；否则缺省值为 129) |
| <mr>    | 消息参考（MessageReference）    | 0~255 | 整数型的 GSM 03.40 TP-Message-Reference                      |

 

举例：

| 命令（→）/返回（←） | 实例                    | 解释和说明                                                   |
| ------------------- | ----------------------- | ------------------------------------------------------------ |
| →                   | AT+CMGF=1               | 设置为TEXT模式                                               |
| ←                   | OK                      |                                                              |
| →                   | AT+CSCS="GSM"           | 或AT+CSCS="IRA"                                              |
| ←                   | OK                      |                                                              |
| →                   | AT+CMSS=6               | 发送+CMGW实例中被+CMGW存储起来的编号为6的短信，接收方的号码仍为+CMGW存入的号码 |
| ←                   | +CMSS: 11 <br>OK        | 发送成功，<mr>=11                                            |
| →                   | AT+CMSS=7,"13192310560" | 发送+CMGW实例中被+CMGW存储起来的编号为7的中文短信，并且改变接收方号码为13192310560 |
| ←                   | +CMSS: 12 <br>OK        | 发送成功                                                     |
