## 发布消息：AT+MPUB

本命令从客户端到服务器，传送应用消息。

语法规则：

| 命令类型 | 语法                                       | 返回                                         | 说明  |
| -------- | ------------------------------------------ | -------------------------------------------- | ----- |
| 设置命令 | `AT+MPUB=<topic>,<qos>,<retain>,<message>` | OK                                           | qos=0 |
|          |                                            | OK <br>PUBACK                                | qos=1 |
|          |                                            | OK <br>PUBREC <br>PUBCOMP                    | qos=2 |
|          |                                            | ERROR                                        | 失败  |
| 测试命令 | AT+MPUB=?                                  | `+MPUB:<topic>,(0-2),(0-1),<message>` <br>OK |       |

 

参数定义：

| 参数        | 定义     | 取值   | 对取值的说明                                                 |
| ----------- | -------- | ------ | ------------------------------------------------------------ |
| `<qos>`     | 服务质量 | 0      | 至多一次                                                     |
|             |          | 1      | 至少一次                                                     |
|             |          | 2      | 确保只有一次                                                 |
| `<retain>`  | 保留标志 | 0      | 服务器不能存储这个消息也不能移除或替换任何现存的保留消息。   |
|             |          | 1      | 服务器必须存储这个应用消息和它的服务等级质量(QOS)，以便它可以被分发给未来的主题名匹配的订阅者。 |
| `<topic>`   | 消息主题 | 字符串 | 最大256个字节。可以用""括住，也可以不用""                    |
| `<message>` | 消息内容 | 字符串 | 最大4100个字节。字符串类型，须用双引号括住。**注:消息中内嵌的双引号请用\22表达；控制字符回车\r(0x0D)请用\0D表达；控制字符换行\n（0x0A）请用\0A表达；控制字符反斜杠（0x5C）请用\5C表达 <br>如果是MCU发消息，可能需要用\\\22，\\\0D，\\\0A，\\\5C来表达，即\需要转义成\\\\** |

