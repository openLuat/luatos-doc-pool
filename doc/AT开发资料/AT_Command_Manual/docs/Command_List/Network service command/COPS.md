## 运营商查询和选择：AT+COPS

设置命令用来尝试选择和注册一个GSM/UMTS网络运营商。<mode>用来选择是自动注册(<oper>被忽略)，还是手动注册到<oper>（<oper>的取值由<format>定义）。如果手动选择的运营商<oper>不可用，那么也不注册其他的运营商，除非<mode>=4.

当<mode>=2时，强制退网，并一直保持退网状态直到<mode>设置为0，1或4。

正在执行注网或退网的当中设置此命令将不予执行。

查询命令返回当前的<mode>，当前注册的运营商<oper>以及当前使用的接入技术（Access Technology）。 

语法规则：

| 命令类型 | 语法                                                  | 返回                                                         |
| -------- | ----------------------------------------------------- | ------------------------------------------------------------ |
| 设置命令 | AT+COPS=<mode>[,<format>[,<oper>[,<AcT>[,<Domain>]]]] | OK                                                           |
| 查询命令 | AT+COPS?                                              | +COPS: <mode>[,<format>,<oper>[,< AcT>[, <Domain>]]] <br>OK  |
| 测试命令 | AT+COPS=?                                             | +COPS: [list of supported (<stat>,long alphanumeric <oper>,short alphanumeric <oper>,numeric <oper>[,< AcT>])s][,,(list of supported s),(list of supported s)]<br> OK |

 

参数定义:

| 参数     | 定义                         | 取值 | 对取值的说明                                                 |
| -------- | ---------------------------- | ---- | ------------------------------------------------------------ |
| <mode>   | 运营商注册模式               | 0    | 自动模式；<oper>被忽略                                       |
|          |                              | 1    | 手动注册运营商(<oper>必须有，<AcT>可以有)                    |
|          |                              | 2    | 手动退网并一直保持退网状态直到<mode>设置为 0,1,4             |
|          |                              | 3    | 仅设置<format> (用于查询命令+COPS?)；不尝试进行注册或注销(<oper>字段可忽略) |
|          |                              | 4    | 手动/自动(<oper>字段不可忽略)；如果手动选择失败，将进入自动选择模式(<mode>=0) |
| <format> | 运营商的格式                 | 0    | 长字符串型<oper> (采用字母数字格式)，最多 16 字符            |
|          |                              | 1    | 短字符串型<oper> (采用字母数字格式)，最多 8 字符             |
|          |                              | 2    | 数字式字符串型<oper>                                         |
| <oper>   | 与<format>相对应的运营商取值 | -    | 字符型；<format>表示该字符串采用字母数字型还是数字型；数字型表示运营商的方法为MCC（3位）+MNC（2位），即移动国家码+移动网络码 |
| <stat>   | 网络可用状态                 | 0    | 未知                                                         |
|          |                              | 1    | 可用网络                                                     |
|          |                              | 2    | 当前网络                                                     |
|          |                              | 3    | 禁用网络                                                     |
| <AcT>    | Access Technology，网络类型  | 0    | GSM                                                          |
|          |                              | 1    | GSM Compact                                                  |
|          |                              | 2    | UTRAN                                                        |
|          |                              | 3    | GSM w/EGPRS                                                  |
|          |                              | 4    | UTRAN w/HSDPA                                                |
|          |                              | 5    | UTRAN w/HSUPA                                                |
|          |                              | 6    | UTRAN w/HSDPA and HSUPA                                      |
|          |                              | 7    | E-UTRAN                                                      |
|          |                              | 8    | UTRAN HSPA+                                                  |
| <Domain> | 域                           | 0    | 仅CS                                                         |
|          |                              | 1    | 仅PS                                                         |
|          |                              | 2    | CS/PS都有                                                    |

 

举例:

| 命令（→）/返回（←） | 实例                             | 解释和说明                                  |
| ------------------- | -------------------------------- | ------------------------------------------- |
| →                   | AT+COPS?                         | 查询网络信息                                |
| ←                   | +COPS: 0,2,"46001",7 <br>OK      |                                             |
| →                   | AT+COPS=3,1                      | 设置<format>=1短字符串型(采用字母数字格式)  |
| ←                   | OK                               |                                             |
| →                   | AT+COPS?                         | 查询网络信息                                |
| ←                   | +COPS: 0,1,"UNICOM",7 <br>OK     |                                             |
| →                   | AT+COPS=3,0                      | 设置<format>=0 长字符串型(采用字母数字格式) |
| ←                   | OK                               |                                             |
| →                   | AT+COPS?                         | 查询网络信息                                |
| ←                   | +COPS: 0,0,"CHN-UNICOM",7<br> OK |                                             |
