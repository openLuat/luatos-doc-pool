## 网络注册信息：AT+CREG

设置命令打开或关闭+CREG的URC上报，URC上报内容如下：

设置<n>=1，当网络注册状态发生变化时，主动上报+CREG: <stat>

设置<n>=2，当网络注册状态或驻网小区发生变化时，主动上报+CREG: <stat>[,<lac>,<ci>[,<act>]]

 

查询命令返回当前<n>,<stat>的值，以及当<n>=2时<lac>,<ci>的值。

 

语法规则：

| 命令类型   | 语法                                        | 返回                                                         |
| ---------- | ------------------------------------------- | ------------------------------------------------------------ |
| 设置命令   | AT+CREG=[<n>]                               | OK                                                           |
| 查询命令   | AT+CREG?                                    | <n>=0(default)或 1:<br>+CREG: <n>,<stat> <br>OK <br><n>=2:<br>+CREG: <n>,<stat>,<lac>,<ci>,<act> <br>OK |
| 测试命令   | AT+CREG=?                                   | +CREG: (list of supported <n> values) <br> OK                |
| URC report | +CREG: <stat>                               | If <n>=1，当网络注册状态发生变化时，上报此URC                |
|            | +CREG: <stat>[,<lac>,<ci>[,<act>]]          | If <n>=2，当网络注册状态改变或位置区小区发生变化时           |
|            | +CEREG: <stat>[,[<tac>],[<ci>],[<AcT>][,,]] | If <n>=3，当网络注册状态改变或位置区小区发生变化时           |

 

参数定义:

| 参数   | 定义             | 取值 | 对取值的说明                                                 |
| ------ | ---------------- | ---- | ------------------------------------------------------------ |
| <n>    | URC 上报状态     | 0    | 禁用网络注册非请求结果码（URC,Unsolicited Result Code）      |
|        |                  | 1    | 启用网络注册非请求结果码+CREG: <stat>                        |
|        |                  | 2    | 启用网络注册和位置信息非请求结果码+CREG：<stat>[,<lac>,<ci>[,<act>]] |
|        |                  | 3    | 启用网络注册和位置信息非请求结果码+CEREG: <stat>[,[<tac>],[<ci>],[<AcT>][,,]] |
| <stat> | 当前网络注册状态 | 0    | 未注册；ME 当前没有搜索要注册业务的新运营商                  |
|        |                  | 1    | 已注册，本地网                                               |
|        |                  | 2    | 未注册，但 ME 正在搜索要注册业务的新运营商                   |
|        |                  | 3    | 注册被拒绝                                                   |
|        |                  | 4    | 未知                                                         |
|        |                  | 5    | 已注册，漫游                                                 |
|        |                  | 6    | 注册本地网，SMS-only (仅当<AcT>= E-UTRAN时可能)              |
|        |                  | 7    | 注册漫游网，SMS-only (仅当<AcT>= E-UTRAN时可能)              |
|        |                  | 8    | 仅附着紧急承载业务(不支持)                                   |
|        |                  | 9    | 注册归属地"CSFB not preferred"业务（仅当<AcT>= E-UTRAN时可能） |
|        |                  | 10   | 注册漫游地"CSFB not preferred"业务（仅当<AcT>= E-UTRAN时可能） |
|        |                  | 11   | 仅紧急业务可用                                               |
| <lac>  | 位置区           | -    | 16进制数，字符串型                                           |
| <ci>   | 小区id           | -    | 16进制数，字符串型                                           |
| <act>  | 接入模式         | 0    | GSM                                                          |
|        |                  | 1    | GSM Compact                                                  |
|        |                  | 2    | UTRAN                                                        |
|        |                  | 3    | GSM w/EGPRS                                                  |
|        |                  | 4    | UTRAN w/HSDPA                                                |
|        |                  | 5    | UTRAN w/HSUPA                                                |
|        |                  | 6    | UTRAN w/HSDPA and HSUPA                                      |
|        |                  | 7    | E-UTRAN                                                      |
|        |                  | 8    | UTRAN HSPA+(CAT1 模块)EC-GSM-IoT(CAT4模块)                   |

 

举例:

| 命令(→)/返回(←) | AT Sequences                          | 解释                                                         |
| --------------- | ------------------------------------- | ------------------------------------------------------------ |
| →               | AT+CREG=?                             | 查询<n>的取值范围                                            |
| ←               | +CREG:(0,1,2,3) <br>OK                | 查询结果                                                     |
| →               | AT+CREG?                              | <n>缺省是0，此时查询网络的注册状态                           |
| ←               | +CREG: 0,1 <br>OK                     | 查询出来<n>=0，<stat>=1 （已注册，并且注册的是本地网）       |
| ←（URC）        | +CREG:0                               | 拔掉天线或走入没有信号的区域，此时会有URC上报，表明当前未注册网络 |
| ←（URC）        | +CREG:1                               | 装上天线或走入有信号的区域，此时此时会有URC上报，表明当前重新注册上了网络 |
| →               | AT+CREG=2                             | 设置<n>=2                                                    |
| ←               | OK                                    |                                                              |
| →               | AT+CREG?                              | 查询网络的注册状态                                           |
| ←               | +CREG: 2,1,"1863","0183db22",7<br> OK | 查询到<n>=2，<stat>=1，<lac>=1863，<ci>=0183db22,<act>=7     |
| ←（URC）        | +CREG: 1,"1863","01a2c315",7          | 移动模块，当小区号发生改变的时候，会有个URC上报上来          |
