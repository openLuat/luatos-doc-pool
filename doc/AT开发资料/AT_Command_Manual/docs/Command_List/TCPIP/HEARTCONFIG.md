## 心跳包参数设置:AT^HEARTCONFIG

本命令用于配置心跳的相关参数（是否允许发送心跳包，socket id，心跳间隔）。

 

语法规则：

| 命令类型 | 语法                                                   | 返回和说明                                                   |
| -------- | ------------------------------------------------------ | ------------------------------------------------------------ |
| 设置命令 | `AT^HEARTCONFIG=<option>,<socket_id>,<heartbeat_time>` | OK                                                           |
| 查询命令 | AT^HEARTCONFIG?                                        | `^HEARTCONFIG: <enable>,<socket_id>,<heartbeat_time>` <br>OK |
| 测试命令 | AT^HEARTCONFIG=?                                       | OK                                                           |
| 注意事项 | 目前仅支持一路链接设置心跳包。                         |                                                              |

 

参数定义：

| 参数             | 定义                           | 取值  | 对取值的说明                                 |
| ---------------- | ------------------------------ | ----- | -------------------------------------------- |
| `<option>`       | 是否开启心跳包功能             | 0     | disabled                                     |
|                  |                                | 1     | enabled                                      |
| <socket_id>      | 连接id，定义同+CIPSTART中`<n>` | 0~5   | 如果是单链接，固定为0如果是多链接，取值为0~5 |
| <heartbeat_time> | 心跳间隔时间                   | 5~600 | 单位为秒，缺省值为120                        |

 

举例：

| 命令(→)/返回(←) | 实例                         | 解释和说明                                                   |
| --------------- | ---------------------------- | ------------------------------------------------------------ |
| →               | AT^HEARTCONFIG?              | 查询当前心跳配置                                             |
| ←               | ^HEARTCONFIG: 0,0,120 <br>OK | 缺省配置为：心跳为关，心跳间隔为120秒                        |
| →               | AT^HEARTCONFIG=1,0,180       | 开启心跳功能，cid=0，并设置心跳间隔为180秒                   |
| ←               | OK                           |                                                              |
| →               | AT^HEARTCONFIG?              | 再次查询心跳设置                                             |
| ←               | ^HEARTCONFIG: 1,0,180 <br>OK | 心跳包功能已经打开，当跟服务器建立cid=0的链接后（可以是单链接，也可以是多链接），会自动发送心跳包，心跳包内容缺省为模块的IMEI |
