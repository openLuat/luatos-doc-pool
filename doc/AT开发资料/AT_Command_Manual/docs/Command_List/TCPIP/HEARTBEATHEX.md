## 设置HEX编码格式心跳包内容:AT^HEARTBEATHEX

本命令将心跳包的内容设置为十六进制数据。

语法规则：

| 命令类型 | 语法                                                         | 返回                                            |
| -------- | ------------------------------------------------------------ | ----------------------------------------------- |
| 设置命令 | 如果是单链接（即AT+CIPMUX=0）<br>`AT^HEARTBEATHEX=<len>,<data>` | OK <br>>返回后，设置的心跳包内容会自动发送出去  |
|          | 如果是多链接（即AT+CIPMUX=1）<br>`AT^HEARTBEATHEX=<socket_id>,<len>,<data>` |                                                 |
| 查询命令 | 如果是单链接（即AT+CIPMUX=0）<br>AT^HEARTBEATHEX?            | `^HEARTBEATHEX: <len>,<data> `<br>OK            |
|          | 如果是多链接（即AT+CIPMUX=1）<br>AT^HEARTBEATHEX?            | `^HEARTBEATHEX:<socket_id>,<len>,<data>` <br>OK |
| 测试命令 | AT^HEARTBEATHEX=?                                            | OK                                              |

 

参数定义：

| 参数          | 定义                           | 取值 | 对取值的说明                                 |
| ------------- | ------------------------------ | ---- | -------------------------------------------- |
| `<socket_id>` | 连接id，定义同+CIPSTART中`<n>` | 0~5  | 如果是单链接，固定为0如果是多链接，取值为0~5 |
| `<len>`       | 数据长度                       |      |                                              |
| `<data>`      | 心跳包内容                     |      | 字符串类型，最长为256字节                    |

 

举例：

| 命令(→)/返回(←) | 实例                                       | 解释和说明                                                   |
| --------------- | ------------------------------------------ | ------------------------------------------------------------ |
| →               | AT+CIPMUX=1                                | 设置为多链接                                                 |
| ←               | OK                                         |                                                              |
| →               | AT+CSTT                                    |                                                              |
| ←               | OK                                         |                                                              |
| →               | AT+CIICR                                   |                                                              |
| ←               | OK                                         |                                                              |
| →               | AT+CIFSR                                   |                                                              |
| ←               | 10.134.100.30                              |                                                              |
| →               | AT+CIPSTART=5,"TCP","116.28.164.159",40117 | 连接一个回环服务器（即你发给它什么，它回什么）注:这个地址和端口是随意写的，请不要照抄 |
| ←               | OK <br>5, CONNECT OK                       |                                                              |
| →               | AT^HEARTCONFIG=1,5,120                     | 打开第5路连接的心跳                                          |
| ←               | OK                                         |                                                              |
| →               | AT^HEARTBEATHEX=5,6,414243444546           | 设置新的心跳内容为ABCDEF                                     |
| ←               | OK                                         |                                                              |
| ←               | +RECEIVE,5,6:ABCDEF                        |                                                              |

 
