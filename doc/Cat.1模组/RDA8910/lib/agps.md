
@[TOC]

# agps

模块功能：GPS辅助定位以及星历更新服务.

本功能模块只能配合Air800或者Air530使用；

require"agps"后，会自动开启本功能模块的任务；

开机后，仅获取一次基站对应的经纬度位置和当前时间，把经纬度位置和时间写到GPS芯片中，可以加速GPS定位

会定期更新GPS星历，星历更新算法如下：

从最后一次GPS定位成功的时间算起，每隔4小时连接星历服务器下载一次星历数据（大概4K字节），写入GPS芯片。

例如01:00分开机后，更新了一次星历文件，截止到05:00，“一直没有开启过GPS”或者“开启过GPS，但是GPS从来没有定位成功”，在05:00就会下载星历数据然后写入GPS芯片；

05:00更新星历数据后，在06:00打开了GPS，并且GPS定位成功，然后在07:00关闭了GPS，关闭前GPS仍然处于定位成功状态；

截止到11:00，“一直没有开启过GPS”或者“开启过GPS，但是GPS从来没有定位成功”，在11:00就会下载星历数据然后写入GPS芯片；
