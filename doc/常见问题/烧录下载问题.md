# 烧录下载问题

## USB端口显示不出来，烧录失败

### 简洁版

1、确认模块是否正常供电，模块vbat管脚是否处于工作电压，USB端口是否正常供电，是否没有将powerkey管脚拉低，进行开机。

2、请检查硬件连接是否正常，是否连接到正确的硬件接口。DM->DM、DP->DP、GND->GND，如果不确定DM和DP两根线，可以交换反接一下。

3、检查硬件接口是否损坏，是否需要更换硬件接口。更换USB线或换一个电脑USB接口。

4、模块可能损坏【静电击穿、炉温过高可能导致损坏】，更换模块或者开发板对比测试确认。

5、现象是否是在烧录了某个程序之后出现的，如果是，可以尝试烧录DEMO程序，或AT固件，排除软件问题。

6、是否没有安装USB驱动，724UG（8910平台）模块需要安装usb驱动，

### 详细版

1、正常情况，模块vbat供电，pwrkey 管脚拉到地1.5s 以上就可以开机，VDD_EXT管脚输出1.8v(IO_SEL管脚悬空)/3.3v (IO_SEL管脚接地)就是开机标志，注意：如果vbat管脚供电了，pwrkey接地了，模块VDD_EXT管脚也没输出，或者VDD_EXT管脚输出电压异常，可能spi或者串口，usb，sim卡，VDD_EXT管脚被静电浪涌打坏，注意：复位脚不能上拉，上拉开不了机

2、先看是什么情况下导致的？

- 如果是烧录程序过程中导致不识别端口，大概率是变砖，用uboot方式烧录,烧录方法参考第8点。

- 如果是第一次打样，按如下方式排查：

3、接个好的板子看能不能识别到端口，排除电脑环境和usb线和usb驱动问题,检查下usb座子到模块之间线路有没问题？

4、也可以把usb线路上的tvs管和电容都去掉，直接飞线到模块usb脚到电脑usb口测试。

5、模块供电脚vbat，复位脚电压，VDD_EXT脚电压是不是ok ，VDD_EXT有没对地短路，断电后万用表打到二极管档，红接地，黑接vbat,VDD_EXT ,usb三个管脚，串口，sim卡几个管脚测量，数值在400-600左右是正常，如果偏差大可能有硬件损坏。

6、pwrkey一直接地，vbat供电后，VDD_EXT出来没，如果有1.8v(IO_SEL管脚悬空)/3.3v (IO_SEL管脚接地)输出说明开机了

7、上面都没问题，用uboot方式烧录个at固件试下。

8、uboot强制烧录步骤：先把模块pwrkey脚对地短接，USB_BOOT(注意如果是700e要串个51k上拉到vbat才会进boot)和VDD_EXT短接不松开，接好usb线到电脑，然后电脑Luatools工具上先选个at固件,点下载，注意:是最后给vbat管脚上电开机,看到 进度条在跑了就行了，烧录完后要断开VDD_EXT和USB_BOOT管脚，选一个最新的at固件，在Luatools工具根目录"/resource/xxx_at_lod"目录(xxx是模块对应芯片平台，例780E选618_at_lod，724ug选8910_at_lod)，进行烧录。

9、如果能烧录成功，但是不能识别到usb端口，一般是tvs管和电容导致，可以去掉usb上的tvs管和电容测试。

10、如果设备管理器一直看不到usb端口：

- 检查vbus，dp,dm数据线有没对地短路，阻值异常，是否被浪涌打坏。

- 看是否USB_BOOT和VDD_EXT短路。

- 看串口的rx和tx是否短路，串口是否对地短路。

- 看VDD_EXT是否对地短路。

- USB_BOOT管脚是否一直被拉高，如果都ok，就用USB_BOOT短接VDD_EXT重新烧录个at固件，参考第8点。

11、如果开机能看到usb三个端口，按住boot按键开机，进不了boot模式，usb出现感叹号，不识别，（1）看是否USB_BOOT和VDD_EXT假焊，或者USB_BOOT和VDD_EXT之间的串联电阻是否过大，按键开关是否开路。（2）usb，dp,dm到模块数据线之间串的电阻是否过大，建议10欧以下。(3)如果上面都排查了，一般是usb线的问题，usb要求走差分，90欧姆阻抗，不要用杜邦线转接，建议直接找个好的usb数据线剪断飞到模块usb管脚测试。

## 如果出现下载过程中失败问题，参考如下顺序排查

- 供电可能不稳定，使用稳定的电源供电，可以直接用稳压电源对vbat供电对比确认。

- 下载线可能不稳定，更换稳定的usb下载线。

- 是否是在烧录了某个程序之后出现的，如果是，可以尝试boot模式烧录DEMO程序，或AT固件，排除软件引起的问题。

- 彻底断电，luatools勾选usbboot下载 点击下载以后，按住uboot按钮然后上电。模块即可正常下载。
 