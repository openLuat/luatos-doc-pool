## 1. 如何使用基站定位
> 目前合宙的4G模块都支持基站定位，此服务免费。参考lbsLoc的demo。

## 2. 基站定位原理
>模块正常联网后，搜索附近的小区信息，上报给后台；后台查询小区经纬度，并结合信号强度等因素进行计算（三角定位原理），最后返回计算出来的经纬度给模块。

## 3. 基站定位精度如何
> 搜索到的小区越多，定位的精度越高；一般来说，城市中心定位精度比郊区和农村定位精度高，城市中心的定位精度在几十米到几百米不等，郊区和农村的定位精度更低，可能会有几千米甚至更多的误差。
> 通过多小区定位，将实时搜索到的所有小区同时上报给后台参与定位，基站定位的误差都比较大，如果需要准确定位，请使用支持GPS的模块，例如Air820、Air780EG。

## 4. 为什么基站定位失败
>1、 main.lua中的PRODUCT_KEY和此设备在iot.openluat.com中所属项目的ProductKey必须一致，请去检查。<br>
>2、 后台基站数据库查询不到所有小区的位置信息；LuatOS-Air版本在trace中向上搜索encellinfo，手动查找encellinfo后的所有小区位置；AT版本手动查找AT+CCED=0,1指令返回的小区位置，然后在电脑浏览器中打开[定位查询](http://bs.openluat.com/ "定位查询")，如果手动可以查到位置，则服务器存在BUG，直接向技术支持人员反映问题；如果手动无法查到位置，则基站数据库还没有收录当前设备的小区位置信息，向技术支持人员反馈，我们会尽快收录。

##  5. 合宙官方的基站定位能在国外使用吗
> 不能，没有国外的基站数据库。

## 6. 基站定位获取的经纬度是什么格式的？
>基站定位获取的经纬度为WGS-84格式。
>各种坐标系说明以及转换方法参考：http://old.openluat.com/GPS-Offset.html

## 7. 当同时使用基站定位和wifi定位怎么判断是基站定位成功了还是wifi定位成功了？
>服务器返回的第一个字节为0x00表示基站定位成功返回0xFF表示WIFI定位成功。

## 8. 请问，基站定位时日志打印“远程主机强迫关闭了一个现有连接“时，定位失败的概率会增大，如何解决？
>免费的服务器承受不了高并发压力，可以加大lbsLoc.request接口的tiemout参数来提高成功率。

## 9. 免费和收费服务区别

### 免费服务

1. 免费服务仅支持单基站定位,无wifi定位, 同一IMEI的请求间隔需大于15秒。
2. 超过频次的定位请求均会返回定位失败。返回错误码，不包含位置信息。

### 收费服务

1. 收费服务支持多基站定位和wifi定位, 同一IMEI的请求间隔需大于5秒。

## 10. 各固件的配置方式

### 免费服务

沿用现有的接入参数和流程, 但要控制访问频次

1. AT固件, 现有固件均支持
2. Lua固件, 无需修改
3. CSDK固件, 无需修改

### 收费服务

```
计费方式: 联系销售按IMEI数量购买, 由销售导入IMEI列表，或使用项目key的方式批量购买
```
